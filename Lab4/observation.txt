// Name: Guanghan Li
// Date: 2025-10-07
// Title: Lab4 – observations
// Description: This is the observations that I made.

1: When I compile and run this threadHello program several times, I observe that none of the threads ever fully complete the go function, specifically, they never reach the end after sleeping and calling pthread_exit. What happens in my runs is that only some of the threads manage to print their "Hello" message, and the actual number that prints is different every time I run it. That’s because the main thread finishes very quickly, printing "Main thread done." and immediately causing the entire process to terminate, which kills off all running threads. So only the threads that get scheduled and execute their printf statements in the tiny window before process termination get to print. Sometimes their messages even show up after the main thread’s print, which I notice is due to output buffering and the non-instantaneous nature of process shutdown. The unpredictability comes from how the operating system schedules threads, sometimes I see 16 prints, sometimes 19, sometimes fewer. But regardless, I know that none of them get to finish their sleep or call pthread_exit, so the go function never truly completes for any thread. If I want all threads to finish, I’d have to use pthread_join or call pthread_exit(NULL) at the end of main instead of return 0.
2: The parameter arg in go() is a per-thread variable, each thread gets its own unique copy of the value of i passed at creation, and that argument is stored on the thread’s own stack by the system, not shared between threads. This way, the iteration numbers don’t get mixed up, because pthread_create delivers the right value for the function, and that value lives in each thread’s private execution memory.sequentially by the reader process.
3: The variable i in main is a shared-state variable if its address is passed to threads, because all would point to the same memory. It’s stored on the main thread’s stack. If a thread accesses *(&i), it’ll always see the current value of i in main, which could change as the loop runs. This can cause threads to see unexpected or mismatched values.